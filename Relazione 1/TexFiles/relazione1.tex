
\documentclass{report}

\usepackage[utf8]{inputenc}
\usepackage[italian]{babel}
\usepackage{import}
\usepackage{todonotes}
\usepackage{color}
\usepackage{rotating}
\usepackage[hidelinks]{hyperref}
\usepackage{url}
\usepackage{pdfpages}
\usepackage{siunitx}
\usepackage{pdflscape}
\usepackage{subfig}
\usepackage[euler]{textgreek}
\usepackage{mhchem}

\usepackage{enumerate} 
\usepackage{amsmath}
\usepackage{amsfonts}

\usepackage[signatures,swapnames,sans]{frontespizio}

\usepackage{geometry}
\geometry{portrait, margin=3cm}
\usepackage{siunitx}
\usepackage{booktabs}

\renewcommand*\figurename{Figura}

\newcommand{\sub}[1]{\textsubscript{#1}}
\newcommand{\super}[1]{\textsuperscript{#1}}
\newcommand{\parallelsum}{\mathbin{\!/\mkern-5mu/\!}}

\newcommand{\Fig}[0]{Fig.}

\usepackage{titlesec}

\titleformat{\chapter}{\normalfont\huge}{}{20pt}{\huge\bfseries}

\linespread{1.3}

\begin{document}
	\begin{frontespizio}
		\Margini{3cm}{3cm}{3cm}{3cm}
		\Universita{Bergamo}
		\Logo[43.332mm]{unibg-mark}
		\Divisione{Scuola di Ingegneria}
		\Corso[Laurea Magistrale]{Ingegneria Informatica}
		\Titolo{Laboratorio di Elettronica}
		\Sottotitolo{Relazione esperienza di laboratorio 1}
		\Punteggiatura{}
		\NRelatore{Prof.}{Prof.}
		\Relatore{Luigi Gaioni}
		\Candidato[1058231]{Giulia Allievi}
		\Candidato[1059640]{Martina Fanton}
		\Annoaccademico{2022--2023}
		\begin{Preambolo*}
			\usepackage[italian]{babel}
			\usepackage[T1]{fontenc}
			\usepackage[utf8]{inputenc}
			\usepackage{microtype}
			\usepackage{lmodern}
			\graphicspath{{img/}}
			
			\renewcommand{\frontinstitutionfont}{\fontsize{14}{17}\bfseries\scshape}
			\renewcommand{\fronttitlefont}{\fontsize{17}{21}\bfseries\scshape}
			\renewcommand{\frontfootfont}{\fontsize{12}{14}\bfseries\scshape}
		\end{Preambolo*}
	\end{frontespizio}

%----------------------------------------------------------------------------------------
%	PAGINA BIANCA
%----------------------------------------------------------------------------------------
\newpage
\null
\thispagestyle{empty}
\newpage

%----------------------------------------------------------------------------------------
%	INTRO
%----------------------------------------------------------------------------------------
\chapter{Filtro passa-basso attivo}
\section{Introduzione}
% circuito da realizzare
% uA741
% spiegazione veloce pin
Il primo circuito che abbiamo realizzato è un filtro passa-basso attivo. Per costruire questo circuito abbiamo bisogno di un amplificatore operazionale, nel nostro caso abbiamo scelto il \textmu A741, che è un amplificatore operazionale \textit{general purpose}. Per funzionare correttamente, dobbiamo fornirgli sia un'alimentazione positiva che un'alimentazione negativa perché è un componente ad alimentazione duale. Nell'immagine sottostante, la figura \ref{figura:741}, si possono vedere i numeri e la funzione di ogni terminale di questo componente. Per capire quali sono i terminali, sul package troviamo un pallino in corrispondenza del pin numero 1.  \par
\begin{figure}[h]
\centering
\includegraphics[height=6cm]{immagini/741pinout}
\caption{Package e funzione dei pin del \textmu A741.}
\label{figura:741}
\end{figure}
\section{Schema del circuito e analisi teorica}
%% Analisi (da EMI)
\noindent Per analizzare questo circuito facciamo riferimento alla figura \ref{figura:cto_analisi}.
\begin{figure}[h]
\centering
\includegraphics[height=8cm]{immagini/cto_filtro_analisi}
\caption{Schema per analizzare l'amplificatore invertente.}
\label{figura:cto_analisi}
\end{figure}
La resistenza $R_1$ e il condensatore $C_1$ sono in parallelo, pertanto si può calcolare l'impedenza equivalente:
\\[4pt]\indent$\displaystyle{Z_{eq}=C_1\parallelsum R_1=\frac{\frac{1}{s\cdot C_1} \cdot R_1}{\frac{1}{s\cdot C_1} + R_1}=\frac{\frac{R_1}{s\cdot C_1}}{\frac{1+s\cdot R_1C_1}{s\cdot C_1}}=\frac{R_1}{1+s\cdot R_1C_1}}$
\newpage \noindent Per ricavare la funzione di trasferimento del circuito è sufficiente fare un bilancio di correnti all'ingresso invertente. Con $I_1$ si intende la corrente che scorre nell'impedenza equivalente $Z_{eq}$.
\\[2pt]\indent $I_2=I_1+I^-$
\\[2pt]La corrente in ingresso all'OPAMP è molto piccola, idealmente $I^+=I^-\rightarrow 0A$. Perciò l'equazione precedente diventa:
\\\indent $\displaystyle{I_2=I_1}$
\\Utilizzando la legge di Ohm generalizzata, le correnti si possono esprimere come:
\\[2pt]\indent $\displaystyle{\frac{V^-(s)-V_i(s)}{R_2}=(V_o(s)-V^-(s))\cdot\frac{1+s\cdot R_1C_1}{R_1}}$
\\[2pt]Se un circuito è retroazionato negativamente, $V^+=V^-$ per il principio del cortocircuito virtuale. Dato che $V^+$ è a massa, la sua tensione è di 0V, di conseguenza anche $V^-$ si troverà a questa tensione. L'equzione precedente diventa:
\\[2pt]\indent $\displaystyle{\frac{-V_i(s)}{R_2}=V_o(s)\cdot\frac{1+s\cdot R_1C_1}{R_1}}$
\\[2pt]Tramite quest'equazione è facile ricavare la funzione di trasferimento del circuito, che risulta:
\\[2pt]\indent $\displaystyle{\frac{V_o(s)}{V_i(s)}=-\frac{R_1}{R_2}\cdot\frac{1}{1+s\cdot R_1C_1}}$
\\[2pt]La funzione di trasferimento ottenuta è quella di un filtro passa-basso, perché al denominatore troviamo il termine $1+s\cdot R_1C_1$. Vediamo che c'è però anche un fattore di guadagno pari al rapporto fra $R_1$ e $R_2$. Compare anche un segno meno, pertanto l'ingresso e l'uscita saranno sfasate di $\displaystyle\pm$180°.
\\Se passiamo al regime sinusoidale, sostituiamo $s$ con $j\omega$. La funzione di trasferimento diventa:
\\[2pt]\indent $\displaystyle{\frac{V_o(\omega)}{V_i(\omega)}=-\frac{R_1}{R_2}\cdot\frac{1}{1+j\omega\cdot R_1C_1}}$
\\[2pt]La frequenza di taglio del filtro è pari a $\displaystyle{f_T=\frac{1}{2\pi\cdot R_1C_1}}$. A questa frequenza il guadagno si riduce di 3 dB e lo sfasamento è di $\mp$45°.
\\[2pt]Se lavoriamo a frequenze minori della frequenza di taglio del filtro, il termine passa-basso è trascurabile, perciò la funzione di trasferimento si semplifica:
\\[2pt]\indent$\displaystyle{\frac{V_o}{V_i}=-\frac{R_1}{R_2}}$
\\[2pt]Vediamo che il guadagno dipende dal rapporto fra le due resistenze: se $R_1<R_2$ il circuito attenua il segnale in ingresso, quindi otteniamo un attenuatore (invertente); se $R_1>R_2$ il segnale viene amplificato, perciò il circuito si comporta come un amplificatore (invertente); infine, se $R_1=R_2$ il circuito ha guadagno unitario, di conseguenza si comporta come un buffer. 
\section{Dimensionamento, misure e osservazioni}
Per alimentare l'amplificatore operazionale abbiamo utilizzato un'alimentazione duale, con tensione positiva di \SI{10}{\volt} e alimentazione negativa di \SI{-10}{\volt}. L'obiettivo è realizzare un filtro con frequenza di taglio dell'ordine di \SI{10}{k\hertz} e guadagno 10. \par
\noindent Per il dimensionamento scegliamo $R_1=\SI{18}{k\ohm}$ e calcoliamo $R_2$ dalla formula del guadagno:
\\[2pt]\indent$\displaystyle{G=\frac{R_1}{R_2}\rightarrow R_2=\frac{R_1}{G} = \frac{\SI{18}{k\ohm}}{10}=\SI{1.8}{k\ohm}}$ 
\\[2pt]Dalla frequenza di taglio desiderata calcoliamo il valore che deve avere la capacità $C_1$:
\\[2pt]\indent$\displaystyle{f_T=\frac{1}{2\pi\cdot R_1C_1}\rightarrow C_1=\frac{1}{2\pi\cdot R_1\cdot f_T}=\frac{1}{2\pi\cdot \SI{18}{k\ohm}\cdot \SI{10}{k\hertz}}\simeq\SI{0.88}{n\farad}}$
\\[4pt]Scegliamo di approssimare $C_1$ a \SI{1}{n\farad}, perciò la frequenza di taglio del nostro filtro sarà:
\\[2pt]\indent$\displaystyle{f_T=\frac{1}{2\pi\cdot R_1C_1}=\frac{1}{2\pi\cdot \SI{18}{k\ohm}\cdot \SI{1}{n\farad}}\simeq\SI{8.8}{k\hertz}}$
\\[4pt]In figura \ref{figura:cto_filtro} è riportato lo schema del circuito con i valori dei componenti scelti. 
\begin{figure}[h!]
\centering
\includegraphics[height=8cm]{immagini/cto_filtro}
\caption{Schema del filtro passa-basso attivo.}
\label{figura:cto_filtro}
\end{figure}
\\Con il multimetro andiamo a misurare il valore delle resistenze che monteremo sulla breadboard. Le misure sono riportate in tabella \ref{table:mis_res}.
\begin{table}[h]
	\centering
	\begin{tabular}{|c|c|c|}
	\cline{2-3} 
	\multicolumn{1}{c|}{} & \textbf{Valore nominale} & \textbf{Valore misurato}\\ 
		%\hline
		%{} & \textbf{Valore nominale} & \textbf{Valore misurato} \\ 
		\hline
		$\mathbf{R_1}$ & \SI{18}{k\ohm} & \SI{17.977}{\ohm} \\ 
		\hline
		$\mathbf{R_2}$& \SI{1.8}{k\ohm} & \SI{1.815}{k\ohm} \\ 
		\hline
	\end{tabular}
\caption{Misure delle resistenze utilizzate per il circuito.}
\label{table:mis_res}
\end{table}
\\Per realizzare il filtro posizioniamo il \textmu A741 sulla breadboard e colleghiamo i terminali in questo modo:
\begin{itemize}
\item il terminale numero 8 è \textit{Not Connected}, perciò non viene collegato a nulla;
\item i terminali 7 e 4 sono collegati rispettivamente all'alimentazione positiva e all'alimentazione negativa;
\item i terminali 1 e 5 servono per compensare l'offset, li lasciamo floating;
\item il terminale 3, ovvero l'ingresso non-invertente, lo connettiamo a massa;
\item il terminale 2 è l'ingresso invertente. A questo terminale colleghiamo un terminale della resistenza $R_1$ e un terminale della capacità $C_1$, inoltre applichiamo il segnale tramite la resistenza $R_2$; 
\item il terminale 6 serve per prelevare l'output. Questo terminale è collegato al terminale di $R_1$ e al terminale di $C_1$ non connessi con il pin 6.
\end{itemize}
In figura \ref{figura:foto_circ} è mostrata una fotografia del circuito realizzato in cui si possono vedere le connessioni descritte in precedenza.
\begin{figure}[h!]
\centering
\includegraphics[height=7.6cm]{immagini/circuito}
\caption{Fotografia del filtro passa-basso attivo realizzato in laboratorio.}
\label{figura:foto_circ}
\end{figure}
\\Alimentiamo il circuito e applichiamo un segnale collegando con un cavo BNC il generatore di forme d'onda al circuito. Per osservare la risposta del filtro utilizziamo l'oscilloscopio collegando le due sonde come mostrato in figura \ref{figura:connessioni}. I coccodrilli delle due sonde li colleghiamo a massa, la punta della prima sonda (CH1, traccia gialla) la colleghiamo al capo della resistenza $R_2$ connesso al generatore di forme d'onda, mentre la punta dell'altra sonda (CH2, traccia azzurra) la connettiamo al terminale di $R_1$ connesso al pin 6 del \textmu A741.
\begin{figure}[h!]
\centering
\includegraphics[height=7.6cm]{immagini/circuito_sonde}
\caption{Fotografia del filtro passa-basso attivo con le connessioni del segnale e dell'oscilloscopio.}
\label{figura:connessioni}
\end{figure}
\\Nella fig sotto è mostrato il grafico dell'oscilloscopio con La forma d'onda scelta è una sinusoide di frequenza \SI{100}{\hertz} e tensione picco-picco $V_{PP}=\SI{500}{m\volt}$. 
% oscilloscopio
% tabella (c'è già)
% matlab (io)
% considerazioni teo vs sper (io)
% saturazione
% offset
\begin{table}[h!]
	\centering
	\begin{tabular}{|c|c|c|c|c|}
		\hline
		\textbf{Frequenza} &\boldmath$\displaystyle\mathrm{{V_{PP,in}}}$ \textbf{[V]} & \boldmath$\displaystyle\mathrm{{V_{PP,out}}}$\textbf{[V]} & \textbf{Guadagno} & \textbf{Sfasamento [°]}\\
		\hline
		100 Hz & 0.488 & 4.804 & 9.84 & -179.3\\
		\hline
		500 Hz & 0.488 & 4.799 & 9.83 & -176.8\\
		\hline
		1 kHz & 0.485 & 4.779 & 9.85 & -173.4\\
		\hline
		5 kHz & 0.481 & 4.188 & 8.71 & -149.7\\
		\hline
		8.8 kHz & 0.484 & 3.388 & 7.00 & -133.9\\
		\hline
		10 kHz & 0.485 & 3.163 & 6.52 & -129.7\\
		\hline
		50 kHz & 0.483 & 0.833 & 1.72 & -96.3\\
		\hline
		100 kHz & 0.484 & 0.427 & 0.88 & -87.7\\
		\hline
		500 kHz & 0.487 & 0.943 & 1.94 & -58.6\\
		\hline
		1 MHz & 0.488 & 0.542 & 1.11 & -41.9\\
		\hline
		5 MHz & 0.477 & 0.621 & 1.30 & -35.9\\
		\hline
		10 MHz & 0.430 & 0.106 & 0.25 & -9.8\\
		\hline\end{tabular}
\caption{Grandezze misurate ad ogni frequenza.}
\label{table:misure}
\end{table}


%----------------------------------------------------------------------------------------

\end{document}
